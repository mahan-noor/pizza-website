(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1225:function(e,t,s){var i,a,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,a=[],void 0===(r="function"==typeof(i=function(){"use strict";const t=s(10),i=s(1120);e.exports=t.extend({...i,defaults:{id:null,imageUrl:"",width:null,height:null,type:"",alt:""},parse(e={}){return this.pickDefaultsFrom(e)}})})?i.apply(t,a):i)||(e.exports=r)},1226:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1),i=s(1263),a=s(1362),r=i.Model.extend({constructor:function(e,t={}){this.app=t.app||t.collection&&t.collection.app,this.on({request:this.onRequest,sync:this.onSync,error:this.onError}),i.Model.call(this,e,t)},getQueryParams(){return t.clone(this.attributes)},exportSettings(e){return e?t.pick(this.attributes,e):t.clone(this.attributes)},importSettings(){},isBulkAllowed:()=>!0,clone(e){return new this.constructor(this.attributes,e)},onRequest(){this.pending=!0},onSync(e,t,s){this.pending=!1,t.errors&&this.trigger("error",e,t,s)},onError(){this.pending=!1},secureSet(e,s,i){if(null===e)return!1;let a,r=i;"object"==typeof e?(a=e,r=s):(a={})[e]=s;const o=t.pick(a,t.intersection(t.keys(a),t.keys(this.attributes)));return!t.isEmpty(o)&&this.set(o,Object.assign(r||{},{validate:!0}))},secureSetParsed(e){return this.secureSet(this.parse(e))},resetToDefaults(e,s){const i=e?t.pick(this.defaults,e):this.defaults;return this.set(i,s)},getNonDefaults(e){const s=e?t.pick(this.attributes,e):this.attributes,i={};return t.each(s,(e,s)=>{t.isEqual(this.defaults[s],e)||(i[s]=e)}),i},hasChangedExcept(e){const s=t.isArray(e)?e:[e];return t.size(t.omit(this.hasChanged(),s))>0},serialize(){return t.clone(this.attributes)},toAPI:()=>({})});Object.assign(r.prototype,a.mixin),e.exports=r},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},1263:function(e,t,s){var i,a,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,a=[],void 0===(r="function"==typeof(i=function(){"use strict";const t=s(22);t.oldSync=t.oldSync||t.sync,t.sync=function(e,s,i){if(!s.getQueryParams&&!i.getQueryParams||s.oldSync)return t.oldSync.call(this,e,s,i);if(!s.app){if("undefined"==typeof window||!window.app)throw new Error('Model\'s "app" object is not defined');s.app=window.app}return s.app.fetcher.request(e,s,i)},e.exports=t})?i.apply(t,a):i)||(e.exports=r)},1311:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1),i=s(1226),a=[28,42,56,70];e.exports=i.extend({defaults:{route:"",offset:0,limit:a[0],page:1,totalItems:0,totalPages:0,pagerLimit:1,schema:{}},validation:{offset:{required:!0,pattern:/^[0-9]\d*$/,min:0,fn(e){if(e<0||this.get("totalItems")&&e>this.get("totalItems"))return"Invalid value for offset, given: "+e}},page:{required:!0,pattern:/^[1-9]\d*$/,min:1,fn(e){if(this.get("totalPages")&&e>this.get("totalPages"))return"Invalid value for page, given: "+e}}},getLimits:()=>a,getQueryParams(){return this.pick(["limit","offset"])},initialize({page:e,offset:t}){e?this.mutateOffsetByPage(e):t&&this.mutatePageByOffset(t),this.on("change",this.calculate)},parse(e){return t.pick(e,t.keys(this.defaults))},calculate(e){t.has(e.changed,"page")&&this.mutateOffsetByPage(e.changed.page),(t.has(e.changed,"offset")||t.has(e.changed,"limit"))&&this.mutatePageByOffset(e.changed.offset),this.attributes.totalPages=Math.ceil(parseFloat(this.get("totalItems")/this.get("limit")))},mutateOffsetByPage(e=this.get("page")){this.attributes.offset=Math.max(parseInt(e,10)-1,0)*this.get("limit")},mutatePageByOffset(e=this.get("offset")){this.attributes.page=Math.floor(parseInt(e/this.get("limit"),10))+1},getSchema(){if(!t.isEmpty(this.get("schema")))return this.get("schema");const e=e=>e<=0||e>this.get("totalPages")?null:this.getUrl({page:e});return{current:this.getUrl(),buttons:{first:{href:e(this.validation.page.min),page:this.validation.page.min,active:this.get("page")!==this.validation.page.min},last:{href:e(this.get("totalPages")),page:this.get("totalPages"),active:this.get("page")!==this.get("totalPages")},prev:{href:e(this.getPrevPage()),page:this.getPrevPage(),active:this.hasPrevPage()},next:{href:e(this.getNextPage()),page:this.getNextPage(),active:this.hasNextPage()}}}},getUrl(e={}){const t=Object.assign(this.getUrlParams(),this.serialize(),e);return this.app.makeUrl(t,this.getUrlQueryParams())},getUrlParams(){},getUrlQueryParams(){},hasNextPage(e=this.get("page")){return e<this.get("totalPages")},hasPrevPage(e=this.get("page")){return e>this.validation.page.min},getPrevPage(){return Math.max(parseInt(this.get("page"),10)-1,1)},getNextPage(){return Math.min(parseInt(this.get("page"),10)+1,this.get("totalPages"))},getNextOffset(){const e=parseInt(this.get("offset"),10),t=parseInt(this.get("limit"),10);return Math.min(e+t,this.get("totalItems"))}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},1359:function(e,t,s){var i,a,r;!function(s,o){a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,(function(){"use strict";const t=s(1),i=s(1226),a=s(1363),r=i.extend({defaults:{limit:60,offset:0}}),o=s(1311),n=i.extend({});e.exports=a.extend({storageKey:"pageable",endless:!1,pending:!1,byPageCache:{},modeIdToPageLinks:{},lastSyncOptions:{},getQueryParams(){const e=t.result(this.filters,"getQueryParams"),s=t.result(this.pager,"getQueryParams"),i=t.result(this.sorting,"getQueryParams");return Object.assign(e,s,i)},initialize(e,s={}){Object.assign(this,t.pick(s,["url","route","endless"])),this.initFilters(s.filters),this.initPager(s.pager),this.initSorting(s.sorting),this.listenTo(this.filters,"change",this.handleFiltersChange),this.listenTo(this.pager,"change",this.handlePagerChange),this.listenTo(this.sorting,"change",this.handleSortingChange),this.on({request:this.onCollectionRequest,sync:this.onCollectionSync,update:this.onCollectionUpdate,reset:this.onCollectionUpdate,sort:this.invalidateCaches})},initFilters(e={}){e.cid?this.filters=e:this.filters=new r(e,{app:this.app})},initPager(e={}){e.cid?this.pager=e:(this.endless||t.defaults(e,{limit:t.result(this.app.settings.get(this.storageKey),"limit")}),this.pager=new o(e,{app:this.app}),e&&e.getUrlQueryParams&&(this.pager.getUrlQueryParams=()=>e.getUrlQueryParams())),this.pager.getUrlParams=()=>this.getQueryParams()},initSorting(e={}){e.cid?this.sorting=e:this.sorting=new n(e,{app:this.app})},fetch(e){if(this.pending)return!1;const s=Object.assign({remove:!this.endless,reset:t.result(e,"reset",this.isEmpty()),page:this.pager.get("page")},e);return this.endless&&(s.add=!0),this.endless&&this.pager.get("page")<this.pager.previous("page")&&(s.at=0),a.prototype.fetch.call(this,s)},serializePartial(){return this.endless&&!t.result(this.lastSyncOptions,"reset")?t.map(this.getCachedPageIds(this.lastSyncOptions.page),e=>this.get(e).serialize()):a.prototype.serialize.call(this)},handleFiltersChange(e,s){const i=t.pick(e.changed,["limit","offset"]);t.isEmpty(i)||this.setPager(i,Object.assign({pageAbleInnerSync:!0},s)),s.pageAbleInnerSync||(this.resetCaches(),this.onFiltersChange(e,s))},handlePagerChange(e,t){t.pageAbleInnerSync||!(e.changed.page||e.changed.limit||e.changed.offset)||this.hasCachedPage(e.changed.page)||this.onPagerChange(e,t)},onFiltersChange(){},onPagerChange(){},handleSortingChange(){},onCollectionRequest(){this.pending=!0,this.lastSyncOptions={}},onCollectionSync(e,t,s){this.pending=!1,this.lastSyncOptions=s},onCollectionUpdate(){this.setPager({totalItems:this.totalItems}),this.invalidateCaches()},resetCaches(){this.modeIdToPageLinks={},this.byPageCache={}},invalidateCaches(){if(this.resetCaches(),this.endless){const e=Math.max(this.pager.get("limit"),1);for(let t=0;t<this.models.length;t+=1){const s=Math.ceil((t+1)/e),i=this.models[t];this.modeIdToPageLinks[i.id]=s,this.byPageCache[s]?this.byPageCache[s].push(i.id):this.byPageCache[s]=[i.id]}}},hasCachedPage(e){const t=this.byPageCache[+e];return t&&t.length===this.pager.get("limit")},getCachedPageIds(e){return this.byPageCache[parseInt(e,10)]},getPageByItemId(e){return this.modeIdToPageLinks[parseInt(e,10)]},getFilters(e){return t.isArray(e)?this.filters.pick(e):this.filters.get(e)},setFilters(...e){return this.filters.secureSet(...e)},getPager(e){return t.isArray(e)?this.pager.pick(e):this.pager.get(e)},setPager(...e){return this.pager.secureSet(...e)},getSorting(e){return t.isArray(e)?this.sorting.pick(e):this.sorting.get(e)},setSorting(...e){return this.sorting.secureSet(...e)},fetchPage(e,t){this.setPager({page:e?parseInt(e,10):this.getPager("page")},t),this.pager.hasChanged()||this.fetch(t)},fetchPrevPage(){!this.pending&&this.pager.hasPrevPage()&&this.setPager({page:this.pager.getPrevPage()})},fetchNextPage(e={}){!this.pending&&this.pager.hasNextPage()&&this.setPager({page:this.pager.getNextPage()},Object.assign({},e))}})}))},1362:function(e,t,s){var i,a,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,a=[],void 0===(r="function"==typeof(i=function(){"use strict";const t=s(123);Object.assign(t.validators,{boolean(e,t,s,i){if("boolean"!=typeof e)return this.format("{0} must be boolean",this.formatLabel(t,i))}}),Object.assign(t.patterns,{email:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),e.exports=t})?i.apply(t,a):i)||(e.exports=r)},1363:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1263),i=s(1226);e.exports=t.Collection.extend({model:i,constructor:function(e,s={}){this.app=s.app,this.on("destroy",(...e)=>this.trigger("sync",...e)),t.Collection.call(this,e,s)},clone(e){return new this.constructor(this.models,{model:this.model,comparator:this.comparator},e)},getQueryParams:()=>({}),_prepareModel(...e){const s=t.Collection.prototype._prepareModel.apply(this,e);return s.app=this.app,s},toPLAIN(e){return this.models.map(t=>t.get(e||t.idAttribute))},serialize(e={}){return this.models.map(t=>t.serialize(e))},toAPI:()=>({}),isBulkAllowed:()=>!0,sortByOrder(e=[],t={}){this.models.sort((t,s)=>e.includes(t.id)&&e.includes(s.id)?e.indexOf(t.id)-e.indexOf(s.id):0),t.silent||this.trigger("sort",this,t)},promiseSync(e,t,s={}){return new Promise((i,a)=>{this.sync(e,t,{...s,success:e=>e.errors?a(e.errors):i(e),error(e){a(e)}})||a(new Error("There is no result returned"))})}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},1464:function(e,t,s){},1600:function(e,t,s){var i,a,r;!function(s,o){a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,(function(){"use strict";const t=s(1),{defaultFolders:i}=s(31),a=s(41),r=s(1698),o=s(1601),{stringToKebabCase:n}=s(13);e.exports=a.extend({defaults:{id:null,title:"",description:"",count:0,isPublic:!0,isShared:!1,permission:"view",userId:null,userName:"",ownerAvatar:"",ownerApprovedFilesCount:0,coverCropData:{},preferences:[],allowedActions:[],thumbs:[]},relations:{preferences:r,thumbs:o},validation:{count:{pattern:"digits"},isPublic:{boolean:!0}},url:"Folder",lastSyncedAttrs:{},initialize(){this.on("sync",this.makeKostylCleanUpCoverCropData),this.on("change",(e,t={})=>{t.observable&&this.app.observer.fire("Favorites:FolderChanged",{id:e.get("id"),cid:e.cid,changed:e.changed,options:t})})},makeKostylCleanUpCoverCropData(e){e.get("preferences").get("coverItemId")&&(e.attributes.coverCropData={})},parse(e={},s){if(e.errors)return{};s.parser=null;const i=e.lightbox?e.lightbox:e,a=t.pick(i,Object.keys(this.defaults));a.id=parseInt(i.lightboxId,10),a.userId=parseInt(i.userId,10),a.count=parseInt(i.count,10),a.isPublic=i.public,a.thumbs=i.items.filter(e=>!t.isEmpty(e));const r=this.experimentalTrueParseRelations(a,s);return Object.assign({},a,r)},serialize(){const e=this.getFolderTitle(this.attributes.title),t=this.generateLink(),s=this.get("userId")===this.app.user.get("id"),i=a.prototype.serialize.call(this);return Object.assign({},i,{title:e,link:t,isOwn:s})},toJSON(){return this.serialize()},generateLink(e){let t=this.get("title");return t?(t=n(t),this.app.makeUrl({route:"Folder",folderId:this.get("id"),folderName:t||"folder"},e)):""},getFolderTitle(e){return i.some(t=>t.label===e)?this.app.tr(e):e},getQueryParams(){return Object.assign({},this.attributes)},savePreference(e,t){return this.get("preferences").get(e).set({value:t}),this.save({},{wait:!0})},hasAction(e){return this.get("allowedActions").includes(e)}})}))},1601:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1119),i=s(30);e.exports=i.extend({url:"Files",model:t,getQueryParams(){return{ids:this.pluck("id")}},parse(e,s={}){s.parser=s.parser||"parseFromSearch";const a=e.result||e;return s.trueparse?a.map(e=>t.prototype.parse(e,s)):i.prototype.parse.call(this,a,s)}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},1698:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1),i=s(10),a=s(30),r=i.extend({defaults:{name:"",label:"",value:null,editable:!0,selector:""},idAttribute:"name",lastSyncedAttrs:{},initialize(){this.fakeNestedSaveLastSyncedAttrs(),this.on("change",(e,t)=>{t.storeAsLastSynced&&this.fakeNestedSaveLastSyncedAttrs()})},saveLastSyncedAttrs(e,t){t.errors||(this.lastSyncedAttrs=Object.assign({},this.lastSyncedAttrs,this.attributes))},resetToLastSynced(e,s){return this.set(e?t.pick(this.lastSyncedAttrs,e):this.attributes,s)},isChangedButNotSaved(e){return this.get(e)!==this.lastSyncedAttrs[e]},isChangedButNotSavedValue(){return this.isChangedButNotSaved("value")},resetToLastSyncedValue(){return this.resetToLastSynced("value")},fakeNestedSaveLastSyncedAttrs(){this.saveLastSyncedAttrs({},{})}});e.exports=a.extend({model:r,getPrefsAsHash(){const e=this.serialize(),t={};return e.forEach(e=>{t[e.name]=e.value}),t}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},1746:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1),i=s(30),a=s(1747);e.exports=i.extend({url:"FolderPermissions",model:a,initialize(){this.cid=t.uniqueId("col"),this.on("change",(e,t={})=>{t.observable&&this.app.observer.fire("Favorites:FolderPermissionsChanged",{cid:this.cid,folderId:e.get("folderId")})}),this.on("update",(e,t={})=>{t.observable&&this.app.observer.fire("Favorites:FolderPermissionsChanged",{cid:this.cid,folderId:e.length?e.first().get("folderId"):0})})},parse:e=>e?e.result:[],findPermissionByEmail(e){return this.find(t=>t.isMatchByEmail(e))}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},1747:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1),i=s(10),a=s(41);e.exports=a.extend({url:"FolderPermission",defaults:{type:"",permission:"",folderId:null,link:null,value:null,user:{}},relations:{user:i.extend({defaults:{userId:null,username:"",email:"",firstName:"",lastName:"",avatar:"/_img/avatar-border-default-30.png"},initialize(){this.on("change:userId",()=>{this.attributes.userId=parseInt(this.attributes.userId,10)})},parse(e={}){const s=t.pick(e,Object.keys(this.defaults));return s.userId=parseInt(s.userId,10),s}})},parse(e={}){if(e.errors)return{};const s=t.pick(e,Object.keys(this.defaults));return s.folderId=parseInt(s.folderId,10)||this.defaults.folderId,s.link=e.link||null,"email"===s.type&&(s.user={email:e.value}),"user"===s.type&&(s.user=e.value),s},getQueryParams(){const e=Object.assign({emitter:this.app.uid},this.attributes,this.get("user").attributes);return"link"===this.get("type")&&(e.id=this.get("value")),"user"===this.get("type")&&(e.id=this.get("user").get("userId")),e.type="link"===e.type?e.type:"user",e},serialize(){return Object.assign(this.get("user").serialize(),{userId:parseInt(this.get("user").get("userId"),10),permission:this.get("permission"),type:this.get("type"),link:this.get("link"),fullName:this.getFullName()})},getFullName(){return this.get("user").get("firstName").length?`${this.get("user").get("firstName")} ${this.get("user").get("lastName")||""}`.trim():this.get("user").get("email")},isMatchByEmail(e){return"link"!==this.get("type")&&this.get("user").get("email")===e},updatePermission(e){return this.save(e,{wait:!0,observable:!0})},deletePermission(){return this.sync("delete",this,{success:()=>this.destroy({observable:!0})})}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},1979:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1359),i=s(2020);e.exports=t.extend({url:"Folders",model:i,experimentalTrueParse({lightboxes:e=[],count:t,stats:s={}},a={}){return this.totalItems=parseInt(t,10),a.parse=!1,a.trueparse=!0,e.map(e=>i.prototype.parse(e,a))},parse(e,t){return this.experimentalTrueParse(e,t)},createFolder(e={}){const t=new i(e,{app:this.app});return t.promiseSave({},{wait:!0}).then(()=>this.add(t,{at:0,created:!0}))},updateFolder(e,t,s){return this.get(e).save(t,Object.assign({wait:!0,observable:!0},s))},deleteFolder(e){return this.get(e).destroy()},deleteFolders(e){return e.forEach(e=>this.deleteFolder(e))},addToCart(e){return this.promiseSync("update",this,{url:"CartFolderFiles",getQueryParams:{folderId:e}}).then(()=>this.trigger("sync",this))},moveFolders(e){return this.promiseSync("update",this,{url:"MoveFolderFiles",getQueryParams:e}).then(()=>this.trigger("sync",this))},copyFolders(e){return this.promiseSync("update",this,{url:"CopyFolderFiles",getQueryParams:e}).then(()=>(this.trigger("sync",this),e))},isPageSetAndCorrect(){return this.app.queryParams.page&&!this.pager.hasNextPage(+this.app.queryParams.page)?(this.pager.set("totalItems",this.totalItems),this.pager.getUrl({page:this.pager.get("totalPages")})):null},onPagerChange(){this.fetch()}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},2020:function(e,t,s){var i,a,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,a=[],void 0===(r="function"==typeof(i=function(){"use strict";const t=s(1600);e.exports=t.extend({getQueryParams(){return Object.assign({},this.attributes,{thumbsSize:"thumb",thumbsLimit:4})}})})?i.apply(t,a):i)||(e.exports=r)},2134:function(e,t,s){(function(e){var i,a,r;!function(s,o){a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,(function(){"use strict";const t=s(22),{getLogger:i}=s(15),a=i(e),r=s(1600),o=e=>e instanceof t.Model?[e.get("id")]:e instanceof Array?e.map(e=>e.get("id")):[];e.exports={createFolder(e,t){return new Promise(s=>{this.callModal("CreateFolder",{app:e,model:new r({},{app:e}),onCancelCallback:s,onSubmitCallback:i=>{t.createFolder(i).then(t=>{e.observer.broadcast(t.get("isPublic")?"Track:UE:Folders:CreatePublicPopup":"Track:UE:Folders:CreatePopup")}).catch(e=>a.error("Can't create folder. Error: "+e)).finally(s)}})})},editFolder(e,t){return new Promise(s=>{this.callModal("EditFolder",{app:e,model:t,onCancelCallback:s,onSubmitCallback:i=>{t.promiseSave(i,{wait:!0,observable:!0}).then(()=>{e.observer.fire("Notification",{type:"success"}),e.observer.broadcast(t.get("isPublic")?"Track:UE:Folders:EditPublicPopup":"Track:UE:Folders:EditPopup")}).catch(e=>a.error("Can't edit folder. Error: "+e)).finally(s)}})})},moveFolders(e={}){const{app:t,folders:s,foldersToMove:i,isGranted:r=(()=>{})}=e,n=o(i);return new Promise(e=>{this.callModal("MoveFiles",{app:t,folders:s,getActiveFolder:()=>i,isGranted:r,onCancelCallback:e,onSubmitCallback:i=>{this.moveFoldersWithoutModal(t,s,n,i.folder).catch(e=>a.error("Can't move folders. Error: "+e)).finally(e)}})})},moveFoldersWithoutModal:(e,t,s,i)=>t.moveFolders({source:s,target:i}).then(()=>{t.fetch({reset:!0}),e.observer.fire("Notification",{type:"success"}),e.observer.broadcast("Track:UE:Folders:Move")}),copyFolders(e){const{app:t,folders:s,foldersToCopy:i,isGranted:r=(()=>{})}=e,o=i instanceof Array?i:[i];return new Promise(e=>{this.callModal("CopyFiles",{app:t,getActiveFolder:()=>i,isGranted:r,onCancelCallback:e,onSubmitCallback:i=>{s.copyFolders({source:o.map(e=>e.get("id")),target:i.folder}).then(e=>{s.fetch({reset:!0}),t.observer.fire("Favorites:RemoteFolderChanged",{id:e.target}),t.observer.fire("Notification",{type:"success"})}).catch(e=>{a.error("Can't copy files. Error: "+e),t.observer.fire("Notification",{type:"error"})}).finally(e)}})})},addToCart(e,t,s){const i=o(s);t.addToCart(i).then(()=>{e.observer.fire("Notification",{type:"success"}),e.store.get("Cart").fetch()})},shareFolders(e,t,s,i){const a=t instanceof Array&&1===t.length?t[0]:t;i||a instanceof Array?this.callShareFolderModal(e,a,s,i):a.fetch({getQueryParams:{thumbsSize:"thumb",thumbsLimit:6}}).then(()=>{this.callShareFolderModal(e,a,s,a.get("thumbs"))})},callShareFolderModal(e,t,s,i){this.callModal("ShareFolder",{app:e,model:t,permissions:s,collection:i,asyncPermissionsLoad:!s,onAfterHideCallback:()=>e.store.get("ModalsManager").hide("ShareFolder")}),e.observer.broadcast("Track:UE:Folders:SharePopup")},removeFolders(e,t){const s=t instanceof Array?t:[t];return new Promise(t=>{this.callModal("DeleteFolder",{app:e,model:1===s.length?s[0]:s,onCancelCallback:t,onSubmitCallback:()=>{const i=s.map(e=>e.destroy());Promise.all(i).then(()=>{e.observer.fire("Notification",{type:"success"})}).catch(t=>{e.observer.fire("Notification",{type:"error"}),a.error("Can't remove folder. Error: "+t)}).finally(t),e.observer.broadcast("Track:UE:Folders:DeletePopup")}})})},callModal(e,{app:t,...s}){t.store.get("ModalsManager").show(e,{app:t,...s,destroyOnHide:!0,onAfterHideCallback:()=>t.store.get("ModalsManager").hide(e)})}}}))}).call(this,s(14)(e))},2865:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1225),i=s(2134);e.exports={isGranted(e,t=!0){if(!["string","object"].includes(typeof e))return!1;const s="string"==typeof e?e.split(" "):e,i={auth:{rule:()=>this.app.user.isLoggedIn(),handler:()=>this.authHandler()},selection:{rule:()=>this.isAnySelected(),handler:()=>this.selectionHandler()},edit:{rule:()=>this.canEditFolderOrFolders(),handler:()=>this.callModal("NeedPermission",{app:this.app})},remove:{rule:()=>this.hasPermissionsTo("delete"),handler:()=>this.callModal("NeedPermission",{app:this.app})},changeFiles:{rule:()=>this.hasPermissionsTo("changeFiles"),handler:()=>this.callModal("NeedPermission")}};return s.every(e=>{const s=i[e]&&i[e].rule();return!s&&t&&i[e].handler(),s})},isAnySelected(){return this.state.isFilesMode()?this.getSelectedFiles().length>0:this.getSelectedFolders().length>0},selectionHandler(){return this.state.isFilesMode()?this.callModal("EmptySelectionFiles"):i.callModal("EmptySelectionFolders",{app:this.app})},authHandler(e="Click"){const s=this.app.store.get("FileForFavorite");let i=null;s&&(i=new t(s,{app:this.app})),this.app.store.get("ModalsManager").show("SignupModal",{app:this.app,title:this.tr("Add to Favorites?"),previewFile:i}).then(()=>{this.app.observer.broadcast("Track:UE:SignUp:ModalShow",{label:`${this.name}/${e}`}),this.app.store.unlink("FileForFavorite")}).catch(()=>{})},canEditFolderOrFolders(){if(this.state.isFilesMode()){const e=this.getActiveFolder();return e&&"edit"===e.get("permission")}const e=this.getSelectedFolders();return e.length&&e.every(e=>"edit"===e.get("permission"))},hasPermissionsTo(e){if(this.state.isFilesMode()){const t=this.getActiveFolder();return t&&t.hasAction(e)}const t=this.getSelectedFolders();return t.length&&t.every(t=>t.hasAction(e))}}},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},2866:function(e,t,s){var i,a,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,a=[],void 0===(r="function"==typeof(i=function(){"use strict";const t=s(10);e.exports=t.extend({defaults:{userId:null,open:!1,editor:!1,folderID:null,thumbs:"normal",liftLevel:2},isFilesMode(){return!["owner","shared"].includes(this.get("folderID"))},isEmptyFoldersMode(){return!this.get("folderID")},wasFoldersMode(){return["owner","shared"].includes(this.previous("folderID"))},getFoldersGroupTitle(e=this.get("folderID")){return{owner:this.app.tr("My Folders"),shared:this.app.tr("Shared With Me")}[e]},getFoldersGroupPermissions(e=this.get("folderID")){return{owner:["owner"],shared:["edit","view"]}[e]}})})?i.apply(t,a):i)||(e.exports=r)},4188:function(e,t,s){var i,a,r;!function(s,o){a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,(function(){"use strict";s(4189),s(1464);const t=s(1),i=s(54),a=s(4190),r=s(2020),o=s(1979),n=s(4194),l=s(1746),h=s(4195),d=s(30),c=s(2866),p=s(2134),u=s(2865),g=s(60),f="nonAuthFavFileAdding",m={page:1,limit:60};e.exports=i.extend({...u,name:"FavoritesPanel",tagName:"div",className:"fav-panel-box",webSocketClient:null,initialStateOverrides:{},filesQueue:[],FavoritesPanelOpened:null,initialize(){this.state=new c(this.getInitialState(),{app:this.app}),this.activeFolder=new r({},{app:this.app}),this.activeFolder.getQueryParams=()=>({...this.activeFolder.serialize(),id:this.state.get("folderID")}),this.folders=new o([],{app:this.app,endless:!0,pager:m,filters:{permission:this.state.getFoldersGroupPermissions(),thumbsSize:"thumb",thumbsLimit:1}}),this.permissions=new l([],{app:this.app}),this.cache=new n([],{app:this.app}),this.collection=new h([],{app:this.app,pager:m,filters:{id:null},endless:!0}),this.selectedByContextMenu=new d([],{app:this.app}),this.app.store.link("FolderCache",this.cache),this.app.store.link("FolderState",this.state),this.listenTo(this.state,"change:folderID",this.onStateFolderIdChange),this.listenTo(this.collection,"update",this.actualizeCache),this.listenTo(this.cache,"reset update",this.folderCacheUpdateCallback),this.listenTo(this.folders,{update:this.handleFoldersUpdate}),this.listenTo(this.app.observer,{"Favorites:OpenPanel":this.handleDrag,"Favorites:ToggleFile":this.toggleFile,"Favorites:TogglePanel":this.togglePanel}),this.shouldFetchComponentsForOpenState()&&this.fetchComponentsForOpenState().then(()=>this.render()),this.isGranted("auth",!1)&&(this.state.get("folderID")||this.tryPlaceFirstFolderAsActive(),this.onStateFolderIdChange())},prepareRender(){return!this.shouldFetchComponentsForOpenState()&&(this.setViews({"":this.state.get("open")?new this.FavoritesPanelOpened({app:this.app,state:this.state,cache:this.cache,collection:this.collection,folders:this.folders,permissions:this.permissions,activeFolder:this.activeFolder,selectedByContextMenu:this.selectedByContextMenu,isGranted:this.isGranted.bind(this),togglePanel:this.togglePanel.bind(this),callModal:this.callModal.bind(this),getActiveFolder:this.getActiveFolder.bind(this),isActiveFolderExist:this.isActiveFolderExist.bind(this),addFile:this.addFile.bind(this),deleteFile:this.deleteFile.bind(this),getSelectedFiles:this.getSelectedFiles.bind(this),getSelectedFolders:this.getSelectedFolders.bind(this),autoCreateFolder:this.autoCreateFolder.bind(this),updatePanelState:this.updatePanelState.bind(this),getWebSocketClient:()=>this.webSocketClient,setWebSocketClient:e=>{this.webSocketClient=e},fetchFolders:this.fetchFolders.bind(this),fetchPermissions:this.fetchPermissions.bind(this),fetchCache:this.fetchCache.bind(this),fetchFolderDependencies:this.fetchFolderDependencies.bind(this)}):new a({app:this.app,state:this.state,collection:this.collection,shouldCallSignUpWhenOpen:this.shouldCallSignUpWhenOpen,openPanel:this.openPanel.bind(this),authHandler:this.authHandler.bind(this),getActiveFolder:this.getActiveFolder.bind(this)})}),!0)},getInitialState(){const e=this.app.userSettings.get("FavoritesPanel"),t=this.app.user.get("id");return e&&e.userId===t?{...e,...this.initialStateOverrides}:{userId:t,...this.initialStateOverrides}},resetPanelToEmptyState(){this.updatePanelState({folderID:null}),this.collection.reset(),this.cache.reset(),this.checkFileToAddQueue()},handleFoldersUpdate(e,{created:t,reset:s}){e.isEmpty()?this.resetPanelToEmptyState():t&&this.updatePanelState({folderID:e.first().get("id")})},actualizeCache(e,{changes:t,at:s}){if(t){const e=t.added.map(e=>({id:e.get("id")})),i=t.removed.map(e=>e.get("id"));this.cache.add(e,{at:s,silent:!0}),this.cache.remove(i,{silent:!0}),this.cache.trigger("update",this.cache,{changes:t,at:s,refetch:!0})}},getSelectedFiles(){return this.cache.where({selected:!0})},getSelectedFolders(){return this.folders.where({selected:!0}).concat(this.selectedByContextMenu.models)},fetchFolders(e,t){let s=this.state.getFoldersGroupPermissions();if(!s){const e=this.getActiveFolder().get("userId")!==this.app.user.get("id")?"shared":"owner";s=this.state.getFoldersGroupPermissions(e)}this.folders.setFilters({permission:s}),this.folders.fetchPage(e,t)},innerAddFile(e,t=0){this.isActiveFolderExist()?this.collection.addFile(e,this.getActiveFolder().get("id"),t):this.autoCreateFolder().then(()=>this.collection.addFile(e,this.state.get("folderID"),t))},innerDeleteFile(e){const t=[e],s=this.cache.indexOf(this.cache.get(e));this.collection.delete({lightbox:this.state.get("folderID"),items:[e],positions:[s]}).then(()=>{this.cache.remove(t)})},toggleFile:t.throttle((function(e){if(!this.folders.length||this.state.isFilesMode())!this.isActiveFolderExist()||this.isGranted("changeFiles",!1)?this.toggleFileById(0|e.id):this.callModal("NeedPermission",{activeFolder:this.activeFolder});else{const t=this.folders.last();t.hasAction("changeFiles")?(this.filesQueue.push(0|e.id),this.updatePanelState({folderID:t.get("id")})):this.callModal("SelectFolder",{onAfterHideCallback:this.openPanel})}}),400),toggleFileById(e){this.cache.get(e)?this.deleteFile(e):this.addFile(e)},deleteFile(...e){this.isGranted("auth changeFiles")&&this.innerDeleteFile(...e)},addFile(e,t){e&&(this.isGranted("auth",!1)?(this.app.store.unlink("FileForFavorite"),this.innerAddFile(e,t)):(this.authHandler("addToFavorites"),this.updateCookieState({key:f,value:e})))},callModal(e,t){this.app.store.get("ModalsManager").show(e,{app:this.app,...t,destroyOnHide:!0,onAfterHideCallback:()=>this.app.store.get("ModalsManager").hide(e)})},updatePanelState(e){this.state.set(e),this.app.userSettings.set({FavoritesPanel:this.state.toJSON()}),this.updateCookieState()},updateCookieState(e){const s={expires:"1Y"};if(e)g.set(e.key,e.value,s);else{const e=t.omit(this.state.attributes,["open","folderID","liftLevel"]);e.visible=this.state.get("open"),e.lightbox=this.state.get("folderID"),e.thumbs="big"===e.thumbs?"medium":"small",g.set("10_lbpSettings",JSON.stringify(e),s),g.set("10_currentLevel",this.state.get("liftLevel"),s)}},getActiveFolder(){return this.activeFolder},isActiveFolderExist(){return this.activeFolder.get("id")},autoCreateFolder(){return p.createFolder(this.app,this.folders)},checkFileToAddQueue(){const e=g.get(f);e&&"null"!==e&&(this.updateCookieState({key:f,value:null}),this.openPanel(),this.innerAddFile(+e))},handleDrag(){this.state.get("open")||(this.togglePanel(),this.app.observer.broadcast("Track:UE:FavoritesPanel:Open",{action:"drag"}))},openPanel(){this.state.get("open")||this.togglePanel()},async togglePanel(){this.updatePanelState({open:!this.state.get("open")}),this.shouldFetchComponentsForOpenState()&&await this.fetchComponentsForOpenState(),this.render()},folderCacheUpdateCallback(e,t){if(!this.isActiveFolderExist())return;this.getActiveFolder().set({count:e.length},{observable:!0}),this.app.observer.fire("Favorites:PanelCacheUpdate",{folderId:this.state.get("folderID"),options:t})},onStateFolderIdChange(){this.state.isFilesMode()?(this.activeFolder.fetch().then(()=>{this.updatePanelComponents(),this.fetchFolderDependencies(this.state.wasFoldersMode()),this.processFilesQueue()}).fail(()=>this.resetPanelToEmptyState()),this.folders.reset()):(this.activeFolder.set(this.activeFolder.defaults),this.cache.reset(),this.collection.reset(),this.fetchFolders(1,{reset:!0}),this.updatePanelComponents())},fetchFolderDependencies(e){if(!this.isActiveFolderExist())return;const t=this.state.get("folderID")!==this.collection.getFilters("id");(e||t)&&(this.fetchPermissions(),this.fetchCache(),this.fetchFiles())},processFilesQueue(){this.isActiveFolderExist()&&0!==this.filesQueue.length&&(this.filesQueue.forEach(e=>{this.toggleFileById(e)}),this.filesQueue=[])},fetchPermissions(){this.permissions.getQueryParams={folderId:this.state.get("folderID")},this.permissions.fetch({reset:!0})},fetchCache(){const e=this.getActiveFolder();this.cache.getQueryParams={id:e.get("id")},this.cache.fetch({reset:!0})},fetchFiles(){this.$("._scroll").scrollTop(0),this.collection.setFilters({id:this.state.get("folderID")}),this.collection.fetchPage(1,{reset:!0})},tryPlaceFirstFolderAsActive(){this.folders.fetch().then(()=>{const e=this.folders.first();this.updatePanelState({folderID:e?e.get("id"):null})}).fail(()=>this.resetPanelToEmptyState())},shouldFetchComponentsForOpenState(){return this.state.get("open")&&null===this.FavoritesPanelOpened},async fetchComponentsForOpenState(){const{default:e}=await Promise.all([s.e(2),s.e(5),s.e(7),s.e(19),s.e(14)]).then(s.t.bind(null,4456,7));this.FavoritesPanelOpened=e},updatePanelComponents(){const e=this.findView("FavoritesPanelContent");e&&e.render()}})}))},4189:function(e,t,s){},4190:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(4191),i=s(54),a=s(4192);e.exports=i.extend({name:"FavoritesPanelClosed",template:t,events:{"click ._pull":"handlePullerClick"},prepareRender(){this.setViews({"._msg-box":new a({app:this.app,state:this.state,collection:this.collection,openPanelCallback:this.openPanel.bind(this),getActiveFolder:this.getActiveFolder.bind(this)})})},handlePullerClick(e){this.shouldCallSignUpWhenOpen?this.authHandler():this.openPanel(),this.app.observer.broadcast("Track:UE:FavoritesPanel:Open",{action:"click"})},openPanel(){},authHandler(){},getActiveFolder(){}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},4191:function(e,t,s){var i,a,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,a=[],void 0===(r="function"==typeof(i=function(){"use strict";e.exports=function(e){return'<div class="fav-panel-closed"> <div class="fav-panel-msg-box _msg-box"></div> <div class="fav-panel fav-panel_closed _pull"> <div class="fav-panel__row"> <div class="fav-panel__cell"> <div class="fav-panel__shadow"></div> </div> <div class="fav-panel__cell fav-panel__cell_middle"> <div class="fav-panel__tab-wrapper"> <div class="fav-panel__tab"> <span class="fav-panel__tab-title"> <i class="fav-panel__tab-icon icon icon-favorites"></i> '+this.tr("Favorites")+' </span> <div class="fav-panel__tab-shadow"></div> </div> </div> </div> <div class="fav-panel__cell"> <div class="fav-panel__shadow"></div> </div> </div> <div class="fav-panel__row"> <div class="fav-panel__cell"> <div class="fav-panel__bg"></div> </div> <div class="fav-panel__cell fav-panel__cell_middle"> <div class="fav-panel__bg"></div> </div> <div class="fav-panel__cell"> <div class="fav-panel__bg"></div> </div> </div> </div></div>'}})?i.apply(t,a):i)||(e.exports=r)},4192:function(e,t,s){var i,a,r;!function(s,o){a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,(function(){"use strict";const t=s(4193),i=s(54),a=s(10),{getAudioCoverByGenre:r}=s(124);e.exports=i.extend({name:"FavoritesMessage",el:!1,template:t,count:1,timer:null,events:{"click ._open":"onOpenClick","click ._close-msg":"onCloseMsgClick"},initialize(){this.messageModel=new a({showed:!1,thumb:null,count:1}),this.listenTo(this.app.observer,"Favorites:fileAdded",this.fileAdded),this.listenTo(this.messageModel,"change:thumb",this.render)},serialize(){return{showed:this.messageModel.get("showed"),count:Math.min(this.messageModel.get("count"),3),prevCount:Math.min(this.messageModel.get("count")-1,3),folderThumb:this.messageModel.get("thumb"),folderPreviousThumb:this.messageModel.previous("thumb"),folderName:this.getFolderName()}},clientAfterRender(){this.messageModel.get("showed")&&setTimeout(()=>this.show(),100)},getFolderName(){const e=this.getActiveFolder();return e?e.get("title"):""},fileAdded(e){if(!this.state.get("open")&&this.collection.get(e.id)){let t=this.messageModel.get("count");this.messageModel.get("showed")?t+=1:t=1;const s=this.collection.get(e.id),i=s.isAudio()?r(s.get("genre"),96):s.makeThumb("normal");this.messageModel.set({showed:!0,thumb:i,count:t})}},show(){clearTimeout(this.timer),this.$el.addClass("fav-msg_visible"),this.$("._img").removeClass("fav-msg__img_hidden"),setTimeout(()=>this.$("._img-box").addClass("fav-msg__img-box_count"+this.messageModel.get("count")),200),this.timer=setTimeout(()=>this.hide(),3e3)},hide(){this.$el.removeClass("fav-msg_visible"),setTimeout(()=>this.messageModel.set({showed:!1,count:1,thumb:null}),200)},onOpenClick(){this.openPanelCallback(),this.hide()},onCloseMsgClick(e){e.stopPropagation(),clearTimeout(this.timer),this.hide()},openPanelCallback(){}})}))},4193:function(e,t,s){var i,a,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,a=[],void 0===(r="function"==typeof(i=function(){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},s=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(s,(function(e){return t[e]||e}))}}(),s='<div class="fav-msg';return e.showed&&e.count>1&&(s+=" fav-msg_visible"),s+='"><div class="fav-msg__wrap _open"><div class="fav-msg__img-box fav-msg__img-box_count'+e.prevCount+' _img-box"><div class="fav-msg__img',e.folderPreviousThumb&&(s+=" fav-msg__img_hidden"),s+=' _img"',e.folderThumb&&(s+=' style="background-image: url('+t(e.folderThumb)+');"'),s+="></div>",e.folderPreviousThumb&&(s+='<div class="fav-msg__img fav-msg__img_prev" style="background-image: url('+t(e.folderPreviousThumb)+');"></div><div class="fav-msg__img fav-msg__img_back"></div>'),s+='</div><span class="fav-msg__text">'+this.tr("Added to “<b>%s</b>”",e.folderName)+'</span><div class="fav-msg__close _close-msg"><i class="fav-msg__icon icon icon-close-small-white"></i></div><i class="fav-msg__pointer"></i></div></div>'}})?i.apply(t,a):i)||(e.exports=r)},4194:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(10),i=s(30);e.exports=i.extend({url:"FolderCache",model:t.extend({defaults:{id:null,selected:!1},parse:e=>({id:parseInt(e,10)})}),reorder(e,t){return this.sync("update",this,{getQueryParams:Object.assign({},this.getQueryParams,{fileId:e,index:t}),success:()=>this.trigger("sync",this)}).promise()},getSelected(){return this.where({selected:!0})},getSelectedIds(){return this.getSelected().map(e=>e.id)}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)},4195:function(e,t,s){(function(e){var i,a,r;!function(s,o){a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,(function(){"use strict";const t=s(1),i=s(1359),a=s(4196),{getLogger:r}=s(15),o=r(e);e.exports=i.extend({url:"FavoriteFiles",model:a,parse(e){if(e instanceof Array)return e;const{count:t,items:s=[]}=e;return this.totalItems=Math.max(parseInt(t,10),0),s},addFile(e,s,i){const r=new a({id:e},{app:this.app});return this.listenToOnce(r,"sync",(s,a)=>{a.errors?o.error("FavoriteFiles: "+t.pluck(a.errors,"error_message").join(". ")):(this.add(s,{at:i}),this.app.observer.fire("Favorites:fileAdded",{id:e}))}),r.save({},{wait:!0,getQueryParams:{id:e,folder:s,at:i}}).promise()},copy(e){return this.sync("update",this,{url:"FavoriteFilesCopy",getQueryParams:e,success:()=>this.trigger("sync",this,{})})},move(e){return this.sync("update",this,{url:"FavoriteFilesMove",getQueryParams:e,success:()=>{this.trigger("sync",this,{}),this.remove(e.items)}})},delete(e){return this.sync("update",this,{url:"FavoriteFilesRemove",getQueryParams:e,success:()=>{this.trigger("sync",this,{}),this.remove(e.items),this.app.observer.fire("Favorites:filesRemoved",{ids:e.items})}})},onPagerChange(){this.fetch()}})}))}).call(this,s(14)(e))},4196:function(e,t,s){var i,a,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=function(){"use strict";const t=s(1),i=s(1119);e.exports=i.extend({url:"FavoriteFile",getQueryParams:t.noop,parse(e,s){if(e.errors)return this.trigger("invalid",this,e.errors),{};const a=e.items?t.first(e.items):e;return i.prototype.parse.call(this,a,s)}})},a=[],void 0===(r="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=r)}}]);